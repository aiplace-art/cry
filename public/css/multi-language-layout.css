/**
 * Multi-Language Layout System v2.0
 * STRICT: Prevents ANY layout shifts when switching between EN/RU/ZH
 *
 * Strategy:
 * 1. Fixed heights for ALL elements (not just data-i18n)
 * 2. Strict max-width limits
 * 3. Aggressive overflow handling
 * 4. Lock all container sizes
 */

/* ===== GLOBAL LAYOUT LOCK ===== */
* {
    /* Prevent layout shift on text change */
    box-sizing: border-box !important;
}

body {
    /* Lock body width */
    overflow-x: hidden !important;
    max-width: 100vw !important;
}

/* ===== HERO SECTION ===== */
.hero h1,
.hero h1[data-i18n="hero.title"] {
    /* STRICT fixed height */
    min-height: 80px !important;
    max-height: 80px !important;
    height: 80px !important;

    /* Prevent overflow */
    overflow: hidden !important;

    /* Center text vertically */
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;

    /* NO wrapping */
    white-space: nowrap !important;
    text-overflow: ellipsis !important;
}

/* For mobile - allow wrapping but keep consistent height */
@media (max-width: 768px) {
    .hero h1[data-i18n="hero.title"] {
        white-space: normal;
        min-height: 60px;
        text-align: center;
    }
}

.hero [data-i18n^="hero."] {
    /* Smooth transitions when text changes */
    transition: none !important;
}

/* ===== STATS BAR ===== */
.stats-bar .stat {
    /* STRICT fixed dimensions */
    min-width: 180px !important;
    max-width: 180px !important;
    width: 180px !important;

    min-height: 100px !important;
    max-height: 100px !important;
    height: 100px !important;

    /* Center content */
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;

    /* Prevent overflow */
    overflow: hidden !important;
}

.stats-bar .stat-label {
    /* STRICT fixed height for labels */
    min-height: 42px !important;
    max-height: 42px !important;
    height: 42px !important;

    /* Force text fit */
    text-align: center !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
    line-height: 1.4em !important;
    font-size: 0.85rem !important;
}

/* ===== FEATURE CARDS ===== */
.feature-card {
    /* STRICT fixed height */
    min-height: 450px !important;
    max-height: 450px !important;

    /* Lock layout */
    display: flex !important;
    flex-direction: column !important;

    /* NO overflow */
    overflow: hidden !important;
}

.feature-card h3 {
    /* STRICT fixed height for titles */
    min-height: 65px !important;
    max-height: 65px !important;
    height: 65px !important;

    /* Force text fit */
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    font-size: 1.3rem !important;
    line-height: 1.5em !important;
}

.feature-card p,
.feature-card .description {
    /* STRICT fixed height for descriptions */
    min-height: 140px !important;
    max-height: 140px !important;
    height: 140px !important;

    /* Force text fit */
    display: -webkit-box !important;
    -webkit-line-clamp: 5 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    font-size: 0.95rem !important;
    line-height: 1.6em !important;
}

/* ===== SERVICE CARDS ===== */
.service-card {
    /* STRICT fixed height */
    min-height: 480px !important;
    max-height: 480px !important;

    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
}

.service-card h3 {
    /* STRICT fixed height */
    min-height: 55px !important;
    max-height: 55px !important;
    height: 55px !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
}

.service-card .service-description {
    /* STRICT fixed description area */
    min-height: 160px !important;
    max-height: 160px !important;
    height: 160px !important;
    overflow: hidden !important;

    /* Force ellipsis */
    display: -webkit-box !important;
    -webkit-line-clamp: 6 !important;
    -webkit-box-orient: vertical !important;
    text-overflow: ellipsis !important;
    font-size: 0.9rem !important;
    line-height: 1.5em !important;
}

.service-card ul {
    /* STRICT fixed list height */
    min-height: 140px !important;
    max-height: 140px !important;
    overflow: hidden !important;
}

.service-card ul li {
    /* Fixed line height */
    min-height: 28px !important;
    max-height: 28px !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
}

/* ===== BUTTONS - STRICT LOCK ===== */
button,
a.button,
.button,
button[data-i18n],
a[data-i18n] {
    /* STRICT fixed button dimensions */
    min-width: 140px !important;
    padding: 0.75rem 1.5rem !important;
    height: 42px !important;

    /* NO wrapping */
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;

    /* Center text */
    text-align: center !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
}

/* Large CTA buttons */
.primary-button,
.cta-button,
.primary-button[data-i18n],
.cta-button[data-i18n] {
    min-width: 180px !important;
    padding: 1rem 2rem !important;
    height: 48px !important;
}

/* ===== NAVIGATION - STRICT LOCK ===== */
nav a,
nav a[data-i18n] {
    /* STRICT fixed nav item dimensions */
    min-width: 100px !important;
    max-width: 140px !important;
    padding: 0.5rem 1rem !important;
    height: 40px !important;
    text-align: center !important;

    /* NO wrapping */
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;

    /* Center vertically */
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
}

/* ===== FOOTER ===== */
.footer [data-i18n] {
    /* Consistent footer link heights */
    min-height: 24px;
    display: inline-block;
}

.footer .footer-section {
    /* Fixed column widths */
    min-width: 200px;
}

/* ===== GENERAL LAYOUT STABILITY ===== */
[data-i18n] {
    /* Disable animations on language switch */
    animation: none !important;

    /* Smooth content change without layout shift */
    will-change: contents;
}

/* Prevent layout shift during translation load */
.translating {
    visibility: hidden;
}

.translated {
    visibility: visible;
}

/* ===== RESPONSIVE ADJUSTMENTS ===== */
@media (max-width: 1024px) {
    .feature-card,
    .service-card {
        min-height: auto; /* Allow natural flow on tablets */
    }
}

@media (max-width: 768px) {
    /* Mobile - prioritize readability over fixed heights */
    .hero h1[data-i18n="hero.title"] {
        min-height: auto;
        white-space: normal;
    }

    .stats-bar .stat {
        min-width: 100%;
        margin-bottom: 1rem;
    }

    button[data-i18n],
    a[data-i18n] {
        white-space: normal; /* Allow wrapping on mobile */
        min-width: auto;
    }
}

/* ===== CHINESE TEXT OPTIMIZATION ===== */
html[lang="zh"] {
    /* Chinese characters are wider - adjust spacing */
    letter-spacing: 0.02em;
}

html[lang="zh"] .feature-card p,
html[lang="zh"] .service-card .service-description {
    /* Chinese text is more compact - may need more lines */
    -webkit-line-clamp: 6;
}

/* ===== RUSSIAN TEXT OPTIMIZATION ===== */
html[lang="ru"] {
    /* Russian words are longer - may need more space */
}

html[lang="ru"] button[data-i18n],
html[lang="ru"] a[data-i18n] {
    /* Russian buttons may need more width */
    min-width: 140px;
}

/* ===== PREVENT FLASH OF UNSTYLED CONTENT ===== */
.language-loading [data-i18n] {
    opacity: 0.7;
    pointer-events: none;
}

/* ===== ULTRA-STRICT LAYOUT LOCK FOR ALL ELEMENTS ===== */
/* Prevents ANY layout shift regardless of language */

/* All headings - strict heights */
h1 {
    min-height: 60px !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
}

h2 {
    min-height: 50px !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
}

h3 {
    min-height: 40px !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
}

h4, h5, h6 {
    min-height: 32px !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
}

/* All paragraphs */
p {
    min-height: 24px !important;
    overflow: hidden !important;
}

/* All sections - prevent growth */
section {
    overflow: hidden !important;
}

/* All containers */
.container,
.grid,
.flex {
    overflow: hidden !important;
}

/* Cards in grid - lock size */
.grid > div,
.features-grid > div,
.services-grid > div {
    min-height: 400px !important;
    max-height: 600px !important;
    overflow: hidden !important;
}

/* Text elements - strict limits */
span, label, small {
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    max-width: 100% !important;
}

/* Lists */
ul, ol {
    overflow: hidden !important;
}

li {
    min-height: 24px !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
}

/* Links - prevent growth */
a {
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
}

/* Divs with content - limit size */
div {
    max-width: 100% !important;
    box-sizing: border-box !important;
}

/* CRITICAL: Lock ALL grid layouts */
.grid-container,
[class*="grid"] {
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)) !important;
}

/* Flex containers - prevent wrapping issues */
.flex-container,
[class*="flex"] {
    flex-wrap: nowrap !important;
}

/* Russian-specific: MORE strict limits */
html[lang="ru"] h1,
html[lang="ru"] h2,
html[lang="ru"] h3 {
    font-size: 0.95em !important;
    letter-spacing: -0.02em !important;
}

html[lang="ru"] p,
html[lang="ru"] span,
html[lang="ru"] div {
    font-size: 0.95em !important;
}

html[lang="ru"] button,
html[lang="ru"] a.button {
    font-size: 0.9em !important;
    padding-left: 1rem !important;
    padding-right: 1rem !important;
}

/* Chinese-specific: Compact layout */
html[lang="zh"] h1,
html[lang="zh"] h2,
html[lang="zh"] h3 {
    letter-spacing: 0.05em !important;
}

html[lang="zh"] p,
html[lang="zh"] span {
    letter-spacing: 0.03em !important;
}

/* EMERGENCY LOCK: If nothing else works, force fixed widths */
html[lang="ru"] *,
html[lang="zh"] * {
    max-width: 100% !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
}

/* Prevent any element from causing horizontal scroll */
html[lang="ru"] body *,
html[lang="zh"] body * {
    max-width: 100vw !important;
}
