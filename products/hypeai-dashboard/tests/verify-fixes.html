<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HypeAI Dashboard - Fix Verification</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #0a0a0f;
            color: #00ff88;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            color: #00d4ff;
            border-bottom: 2px solid #00d4ff;
            padding-bottom: 10px;
        }
        .test-section {
            background: #1a1a2e;
            border: 1px solid #8b5cf6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .test-item {
            display: flex;
            align-items: center;
            padding: 10px;
            margin: 5px 0;
            border-left: 3px solid #666;
        }
        .test-item.pass {
            border-left-color: #00ff88;
            background: rgba(0, 255, 136, 0.1);
        }
        .test-item.fail {
            border-left-color: #ff0055;
            background: rgba(255, 0, 85, 0.1);
        }
        .icon {
            margin-right: 10px;
            font-size: 20px;
        }
        .summary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            font-size: 24px;
            margin: 20px 0;
        }
        .code {
            background: #0a0a0f;
            padding: 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
        .warning {
            background: rgba(245, 158, 11, 0.2);
            border-left: 3px solid #f59e0b;
            padding: 10px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <h1>üîç HypeAI Dashboard - Fix Verification Report</h1>

    <div class="summary" id="summary">
        Running tests...
    </div>

    <div class="test-section">
        <h2>üìÅ CSS Files</h2>
        <div id="cssTests"></div>
    </div>

    <div class="test-section">
        <h2>üìú JavaScript Files</h2>
        <div id="jsTests"></div>
    </div>

    <div class="test-section">
        <h2>üé® HTML Elements</h2>
        <div id="htmlTests"></div>
    </div>

    <div class="test-section">
        <h2>‚öôÔ∏è JavaScript Functionality</h2>
        <div id="functionalityTests"></div>
    </div>

    <div class="test-section">
        <h2>üìä Console Output</h2>
        <div class="code" id="consoleOutput"></div>
    </div>

    <script>
        const results = {
            pass: 0,
            fail: 0,
            total: 0
        };

        const consoleMessages = [];

        // Override console methods to capture output
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;

        console.log = function(...args) {
            consoleMessages.push({ type: 'log', message: args.join(' ') });
            originalLog.apply(console, args);
        };

        console.error = function(...args) {
            consoleMessages.push({ type: 'error', message: args.join(' ') });
            originalError.apply(console, args);
        };

        console.warn = function(...args) {
            consoleMessages.push({ type: 'warn', message: args.join(' ') });
            originalWarn.apply(console, args);
        };

        function addTest(container, name, passed, details = '') {
            results.total++;
            if (passed) results.pass++;
            else results.fail++;

            const div = document.createElement('div');
            div.className = `test-item ${passed ? 'pass' : 'fail'}`;
            div.innerHTML = `
                <span class="icon">${passed ? '‚úÖ' : '‚ùå'}</span>
                <div>
                    <strong>${name}</strong>
                    ${details ? `<div style="font-size: 12px; margin-top: 5px; opacity: 0.7;">${details}</div>` : ''}
                </div>
            `;
            document.getElementById(container).appendChild(div);
        }

        // Test CSS files
        function testCSS() {
            const cssFiles = [
                'css/design-system.css',
                'css/main.css',
                'css/components.css',
                'css/mobile.css',
                'css/twitter-ui.css'
            ];

            cssFiles.forEach(file => {
                const link = document.querySelector(`link[href="${file}"]`) ||
                             document.querySelector(`link[href="../${file}"]`);
                addTest('cssTests', file, !!link, link ? 'Loaded' : 'Not found in HTML');
            });
        }

        // Test JS files
        function testJS() {
            const jsChecks = [
                { name: 'window.TwitterValidators', obj: window.TwitterValidators },
                { name: 'window.RetryManager', obj: window.RetryManager },
                { name: 'window.LoadingStateManager', obj: window.LoadingStateManager },
                { name: 'window.TwitterDataService', obj: window.TwitterDataService },
                { name: 'window.HypeAIDashboard', obj: window.HypeAIDashboard },
                { name: 'window.HypeAICharts', obj: window.HypeAICharts },
                { name: 'window.UIHelpers', obj: window.UIHelpers },
                { name: 'window.fetchWithAbort', obj: window.fetchWithAbort }
            ];

            jsChecks.forEach(check => {
                addTest('jsTests', check.name, !!check.obj, check.obj ? 'Available' : 'Not loaded');
            });
        }

        // Test HTML elements
        function testHTML() {
            const elements = [
                { name: '.dashboard-header', selector: '.dashboard-header' },
                { name: '.header-right', selector: '.header-right' },
                { name: '.dashboard-content', selector: '.dashboard-content' },
                { name: '#followersCount', selector: '#followersCount' },
                { name: '#engagementRate', selector: '#engagementRate' },
                { name: '#goalProgress', selector: '#goalProgress' },
                { name: '#growthRate', selector: '#growthRate' },
                { name: '[data-metric="tweets"]', selector: '[data-metric="tweets"]' },
                { name: '#agentsGrid', selector: '#agentsGrid' },
                { name: '#followerChart', selector: '#followerChart' },
                { name: '#tweetChart', selector: '#tweetChart' },
                { name: '#performanceChart', selector: '#performanceChart' },
                { name: '#engagementChart', selector: '#engagementChart' }
            ];

            elements.forEach(el => {
                const found = parent.document.querySelector(el.selector);
                addTest('htmlTests', el.name, !!found, found ? 'Found' : 'Missing');
            });
        }

        // Test functionality
        function testFunctionality() {
            const tests = [
                {
                    name: 'Agents populated',
                    test: () => {
                        const grid = parent.document.getElementById('agentsGrid');
                        const cards = grid ? grid.querySelectorAll('[data-agent]') : [];
                        return cards.length > 0;
                    }
                },
                {
                    name: 'Charts initialized',
                    test: () => {
                        return typeof Chart !== 'undefined';
                    }
                },
                {
                    name: 'UIHelpers available',
                    test: () => {
                        return window.UIHelpers &&
                               typeof window.UIHelpers.showToast === 'function';
                    }
                },
                {
                    name: 'Twitter service initialized',
                    test: () => {
                        return window.TwitterConnect && window.TwitterConnect.version === '2.0';
                    }
                }
            ];

            tests.forEach(t => {
                try {
                    const passed = t.test();
                    addTest('functionalityTests', t.name, passed, passed ? 'Working' : 'Failed');
                } catch (e) {
                    addTest('functionalityTests', t.name, false, `Error: ${e.message}`);
                }
            });
        }

        // Update summary
        function updateSummary() {
            const passRate = Math.round((results.pass / results.total) * 100);
            const summary = document.getElementById('summary');

            if (passRate === 100) {
                summary.innerHTML = `
                    ‚úÖ ALL TESTS PASSED: ${results.pass}/${results.total} (${passRate}%)
                    <div style="font-size: 14px; margin-top: 10px;">Dashboard is ready for production!</div>
                `;
                summary.style.background = 'linear-gradient(135deg, #00ff88 0%, #00d4ff 100%)';
            } else if (passRate >= 80) {
                summary.innerHTML = `
                    ‚ö†Ô∏è MOSTLY WORKING: ${results.pass}/${results.total} passed (${passRate}%)
                    <div style="font-size: 14px; margin-top: 10px;">${results.fail} issues found</div>
                `;
                summary.style.background = 'linear-gradient(135deg, #f59e0b 0%, #ff9800 100%)';
            } else {
                summary.innerHTML = `
                    ‚ùå CRITICAL ISSUES: ${results.fail}/${results.total} failed (${100-passRate}%)
                    <div style="font-size: 14px; margin-top: 10px;">Dashboard needs fixes</div>
                `;
                summary.style.background = 'linear-gradient(135deg, #ff0055 0%, #ff4081 100%)';
            }
        }

        // Update console output
        function updateConsoleOutput() {
            const output = document.getElementById('consoleOutput');
            if (consoleMessages.length === 0) {
                output.innerHTML = '<em>No console messages (clean!)</em>';
            } else {
                output.innerHTML = consoleMessages.map(msg => {
                    const color = msg.type === 'error' ? '#ff0055' :
                                  msg.type === 'warn' ? '#f59e0b' : '#00ff88';
                    return `<div style="color: ${color};">[${msg.type.toUpperCase()}] ${msg.message}</div>`;
                }).join('');
            }
        }

        // Run all tests
        setTimeout(() => {
            testCSS();
            testJS();
            testHTML();
            testFunctionality();
            updateSummary();
            updateConsoleOutput();
        }, 2000);

        // Update console output every 3 seconds
        setInterval(updateConsoleOutput, 3000);
    </script>
</body>
</html>
