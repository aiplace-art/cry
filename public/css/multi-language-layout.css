/**
 * Multi-Language Layout System v2.0
 * STRICT: Prevents ANY layout shifts when switching between EN/RU/ZH
 *
 * Strategy:
 * 1. Fixed heights for ALL elements (not just data-i18n)
 * 2. Strict max-width limits
 * 3. Aggressive overflow handling
 * 4. Lock all container sizes
 */

/* ===== GLOBAL LAYOUT LOCK ===== */
* {
    /* Prevent layout shift on text change */
    box-sizing: border-box !important;
}

body {
    /* Lock body width */
    overflow-x: hidden !important;
    max-width: 100vw !important;
}

/* ===== HERO SECTION ===== */
.hero h1,
.hero h1[data-i18n="hero.title"] {
    /* STRICT fixed height */
    min-height: 80px !important;
    max-height: 80px !important;
    height: 80px !important;

    /* Prevent overflow */
    overflow: hidden !important;

    /* Center text vertically */
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;

    /* NO wrapping */
    white-space: nowrap !important;
    text-overflow: ellipsis !important;
}

/* For mobile - allow wrapping but keep consistent height */
@media (max-width: 768px) {
    .hero h1[data-i18n="hero.title"] {
        white-space: normal;
        min-height: 60px;
        text-align: center;
    }
}

.hero [data-i18n^="hero."] {
    /* Smooth transitions when text changes */
    transition: none !important;
}

/* ===== STATS BAR ===== */
.stats-bar .stat {
    /* STRICT fixed dimensions */
    min-width: 180px !important;
    max-width: 180px !important;
    width: 180px !important;

    min-height: 100px !important;
    max-height: 100px !important;
    height: 100px !important;

    /* Center content */
    display: flex !important;
    flex-direction: column !important;
    align-items: center !important;
    justify-content: center !important;

    /* Prevent overflow */
    overflow: hidden !important;
}

.stats-bar .stat-label {
    /* STRICT fixed height for labels */
    min-height: 42px !important;
    max-height: 42px !important;
    height: 42px !important;

    /* Force text fit */
    text-align: center !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
    line-height: 1.4em !important;
    font-size: 0.85rem !important;
}

/* ===== FEATURE CARDS ===== */
.feature-card {
    /* STRICT fixed height */
    min-height: 450px !important;
    max-height: 450px !important;

    /* Lock layout */
    display: flex !important;
    flex-direction: column !important;

    /* NO overflow */
    overflow: hidden !important;
}

.feature-card h3 {
    /* STRICT fixed height for titles */
    min-height: 65px !important;
    max-height: 65px !important;
    height: 65px !important;

    /* Force text fit */
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    font-size: 1.3rem !important;
    line-height: 1.5em !important;
}

.feature-card p,
.feature-card .description {
    /* STRICT fixed height for descriptions */
    min-height: 140px !important;
    max-height: 140px !important;
    height: 140px !important;

    /* Force text fit */
    display: -webkit-box !important;
    -webkit-line-clamp: 5 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    font-size: 0.95rem !important;
    line-height: 1.6em !important;
}

/* ===== SERVICE CARDS ===== */
.service-card {
    /* STRICT fixed height */
    min-height: 480px !important;
    max-height: 480px !important;

    display: flex !important;
    flex-direction: column !important;
    overflow: hidden !important;
}

.service-card h3 {
    /* STRICT fixed height */
    min-height: 55px !important;
    max-height: 55px !important;
    height: 55px !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
}

.service-card .service-description {
    /* STRICT fixed description area */
    min-height: 160px !important;
    max-height: 160px !important;
    height: 160px !important;
    overflow: hidden !important;

    /* Force ellipsis */
    display: -webkit-box !important;
    -webkit-line-clamp: 6 !important;
    -webkit-box-orient: vertical !important;
    text-overflow: ellipsis !important;
    font-size: 0.9rem !important;
    line-height: 1.5em !important;
}

.service-card ul {
    /* STRICT fixed list height */
    min-height: 140px !important;
    max-height: 140px !important;
    overflow: hidden !important;
}

.service-card ul li {
    /* Fixed line height */
    min-height: 28px !important;
    max-height: 28px !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    white-space: nowrap !important;
}

/* ===== BUTTONS - GENTLE LOCK ===== */
button[data-i18n],
.button[data-i18n] {
    /* Soft limits for translated buttons only */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Large CTA buttons with i18n */
.primary-button[data-i18n],
.cta-button[data-i18n] {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* ===== NAVIGATION - GENTLE LOCK ===== */
nav a[data-i18n] {
    /* Soft limits, not forcing dimensions */
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 180px;
}

/* ===== FOOTER ===== */
.footer [data-i18n] {
    /* Consistent footer link heights */
    min-height: 24px;
    display: inline-block;
}

.footer .footer-section {
    /* Fixed column widths */
    min-width: 200px;
}

/* ===== GENERAL LAYOUT STABILITY ===== */
[data-i18n] {
    /* Disable animations on language switch */
    animation: none !important;

    /* Smooth content change without layout shift */
    will-change: contents;
}

/* Prevent layout shift during translation load */
.translating {
    visibility: hidden;
}

.translated {
    visibility: visible;
}

/* ===== RESPONSIVE ADJUSTMENTS ===== */
@media (max-width: 1024px) {
    .feature-card,
    .service-card {
        min-height: auto !important; /* Allow natural flow on tablets */
    }
}

@media (max-width: 768px) {
    /* Mobile - prioritize readability over fixed heights */
    .hero h1[data-i18n="hero.title"] {
        min-height: auto;
        white-space: normal;
    }

    .stats-bar .stat {
        min-width: 100%;
        margin-bottom: 1rem;
    }

    button[data-i18n],
    a[data-i18n] {
        white-space: normal !important; /* Allow wrapping on mobile */
        min-width: auto !important;
    }
}

/* ===== CHINESE TEXT OPTIMIZATION ===== */
html[lang="zh"] {
    /* Chinese characters are wider - adjust spacing */
    letter-spacing: 0.02em;
}

html[lang="zh"] .feature-card p,
html[lang="zh"] .service-card .service-description {
    /* Chinese text is more compact - may need more lines */
    -webkit-line-clamp: 6;
}

/* ===== RUSSIAN TEXT OPTIMIZATION ===== */
html[lang="ru"] {
    /* Russian words are longer - may need more space */
}

html[lang="ru"] button[data-i18n],
html[lang="ru"] a[data-i18n] {
    /* Russian buttons may need more width */
    min-width: 140px;
}

/* ===== PREVENT FLASH OF UNSTYLED CONTENT ===== */
.language-loading [data-i18n] {
    opacity: 0.7;
    pointer-events: none;
}

/* ===== ULTRA-STRICT LAYOUT LOCK FOR ALL ELEMENTS ===== */
/* Prevents ANY layout shift regardless of language */

/* Headings - ONLY with i18n */
h1[data-i18n] {
    overflow: hidden;
    text-overflow: ellipsis;
}

h2[data-i18n] {
    overflow: hidden;
    text-overflow: ellipsis;
}

h3[data-i18n] {
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Paragraphs - ONLY with i18n */
p[data-i18n] {
    overflow: hidden;
}

/* Cards in grid - lock size */
.grid > div,
.features-grid > div,
.services-grid > div {
    min-height: 400px !important;
    max-height: 600px !important;
    overflow: hidden !important;
}

/* Text elements - ONLY for translated elements */
span[data-i18n],
label[data-i18n],
small[data-i18n] {
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Lists - ONLY for translated elements */
ul[data-i18n],
ol[data-i18n] {
    overflow: hidden;
}

li[data-i18n] {
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Links - ONLY for translated nav links */
a[data-i18n] {
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Grid layouts - gentle constraints */
.features-grid,
.services-grid {
    /* Let grid breathe, don't force columns */
}

/* Flex containers - allow natural wrapping */
header {
    /* Header should flex naturally */
    flex-wrap: wrap;
}

/* ===== RUSSIAN-SPECIFIC: PROFESSIONAL FIX ===== */
/* Strategy: Same sizes, smart constraints, elegant overflow handling */

html[lang="ru"] {
    /* NO font size changes - keep it beautiful like English */
    /* Russian text is longer, but we handle it gracefully */
}

/* Container-level overflow prevention */
html[lang="ru"] section,
html[lang="ru"] .container {
    overflow-x: hidden !important; /* Prevent horizontal scroll */
    max-width: 100% !important;
}

/* Cards - keep same height but handle overflow gracefully */
html[lang="ru"] .card,
html[lang="ru"] .feature-card,
html[lang="ru"] .service-card {
    overflow: hidden !important;
    width: 100% !important;
    box-sizing: border-box !important;
}

/* Chinese-specific: Compact layout */
html[lang="zh"] h1,
html[lang="zh"] h2,
html[lang="zh"] h3 {
    letter-spacing: 0.05em !important;
}

html[lang="zh"] p,
html[lang="zh"] span {
    letter-spacing: 0.03em !important;
}

/* ===== CRITICAL: Word Breaking for Long Russian Words ===== */
/* Russian words can be VERY long (like "криптотрейдинга"), need smart breaking */
html[lang="ru"] p,
html[lang="ru"] span,
html[lang="ru"] div,
html[lang="ru"] a,
html[lang="ru"] button,
html[lang="ru"] li,
html[lang="ru"] h1,
html[lang="ru"] h2,
html[lang="ru"] h3,
html[lang="ru"] h4 {
    word-break: break-word !important;
    overflow-wrap: break-word !important;
    hyphens: auto !important;
    -webkit-hyphens: auto !important;
    -ms-hyphens: auto !important;
}

/* Chinese word breaking */
html[lang="zh"] p[data-i18n],
html[lang="zh"] span[data-i18n] {
    word-break: break-word;
    overflow-wrap: break-word;
}

/* ===== HEADER BEAUTIFICATION ===== */
/* Ensure header stays beautiful on all languages */

header {
    /* Ensure proper spacing */
    gap: 2rem;
    align-items: center !important;
}

header .logo {
    /* Keep logo compact and beautiful */
    flex-shrink: 0;
    display: flex !important;
    align-items: center !important;
    gap: 0.5rem;
}

header nav {
    /* Nav should flex nicely */
    display: flex !important;
    gap: 1.5rem;
    align-items: center !important;
}

header nav a {
    /* Nav links should not wrap */
    white-space: nowrap;
    flex-shrink: 0;
}

/* Language switcher - keep compact */
.language-switcher-dropdown {
    flex-shrink: 0;
}

/* Wallet button - keep visible */
#walletButton {
    flex-shrink: 0;
    white-space: nowrap;
}

/* ===== CLEAN RUSSIAN FIX: BEAUTIFUL LIKE ENGLISH ===== */
/* Same font sizes, same spacing - just prevent overflow */

html[lang="ru"] body {
    overflow-x: hidden !important;
}

/* Grid - same as English, FLEXIBLE columns to prevent overflow */
html[lang="ru"] .grid,
html[lang="ru"] .features-grid,
html[lang="ru"] .services-grid {
    display: grid !important;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)) !important; /* Slightly smaller min for Russian */
    gap: 2rem !important;
    width: 100% !important;
    max-width: 100% !important;
}

/* Cards - beautiful with ellipsis for overflow */
html[lang="ru"] .feature-card h3,
html[lang="ru"] .service-card h3 {
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
}

html[lang="ru"] .feature-card p,
html[lang="ru"] .service-card p,
html[lang="ru"] .feature-card .description,
html[lang="ru"] .service-card .description {
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    display: -webkit-box !important;
    -webkit-line-clamp: 5 !important;
    -webkit-box-orient: vertical !important;
}

/* Navigation - SMART wrapping for long Russian words */
html[lang="ru"] nav {
    flex-wrap: wrap !important;
    gap: 0.75rem !important; /* Slightly tighter for Russian */
    justify-content: center !important; /* Center items when they wrap */
}

html[lang="ru"] nav a {
    max-width: 200px !important; /* Prevent super-wide nav links */
    text-align: center !important;
}

/* Stats bar - prevent overflow with smart truncation */
html[lang="ru"] .stats-bar {
    gap: 1rem !important; /* Tighter spacing */
    justify-content: center !important;
}

html[lang="ru"] .stats-bar .stat {
    min-width: 160px !important; /* Slightly smaller for Russian */
    max-width: 200px !important;
}

html[lang="ru"] .stats-bar .stat-label {
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    hyphens: auto !important;
    word-break: break-word !important;
}
